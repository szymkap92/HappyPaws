---
import type { Lang } from '@/lib/i18n';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;

const labels = {
  pl: {
    title: 'Dobierz pielęgnację',
    sub: '30 sek · bezpłatnie',
    whatsappAria: 'Napisz na WhatsApp'
  },
  en: {
    title: 'Find best care',
    sub: '30 sec · free',
    whatsappAria: 'Message on WhatsApp'
  },
  de: {
    title: 'Pflege finden',
    sub: '30 Sek. · kostenlos',
    whatsappAria: 'Bei WhatsApp schreiben'
  }
};

const whatsappHref = 'https://api.whatsapp.com/send';
---

<div class="floating-cta-wrap fixed bottom-4 right-4 z-[45] flex flex-col items-end gap-3 sm:bottom-6 sm:right-6">
  <a
    href={whatsappHref}
    target="_blank"
    rel="nofollow noopener noreferrer"
    aria-label={labels[lang].whatsappAria}
    class="group inline-flex h-14 w-14 items-center justify-center rounded-lg border border-[rgba(196,250,216,0.62)] bg-[linear-gradient(135deg,#25d366,#128c7e)] text-white shadow-[0_20px_46px_rgba(18,140,126,0.42)] transition duration-300 hover:-translate-y-0.5 hover:shadow-[0_26px_56px_rgba(18,140,126,0.54)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[rgba(214,255,230,0.9)] focus-visible:ring-offset-2 focus-visible:ring-offset-[rgba(17,10,8,0.8)] sm:min-h-[56px] sm:w-[11.5rem]"
  >
    <svg viewBox="0 0 32 32" class="h-8 w-8" fill="currentColor" aria-hidden="true">
      <path d="M16 3.2c-7.1 0-12.8 5.7-12.8 12.8 0 2.2.6 4.4 1.7 6.3l-1.8 6.6 6.8-1.8c1.8 1 3.9 1.5 6 1.5 7.1 0 12.8-5.7 12.8-12.8S23.1 3.2 16 3.2zm0 23.3c-1.9 0-3.8-.5-5.4-1.5l-.4-.2-4 .9 1.1-3.9-.3-.4a10.6 10.6 0 0 1-1.6-5.6c0-5.8 4.8-10.6 10.6-10.6S26.6 10 26.6 16 21.8 26.5 16 26.5z" />
      <path d="M22.2 19.2c-.3-.1-1.7-.8-1.9-.9-.3-.1-.5-.1-.7.1l-.6.7c-.2.2-.3.2-.6.1-1.6-.8-2.7-1.5-3.7-3.3-.2-.3 0-.4.1-.6l.5-.6c.1-.2.2-.3.3-.5.1-.2 0-.4 0-.5l-.9-2.1c-.2-.5-.4-.4-.6-.4h-.6c-.2 0-.5.1-.7.4-.2.3-.9.9-.9 2.1s.9 2.3 1 2.4c.1.2 1.8 2.9 4.5 4 .6.3 1.1.5 1.5.6.6.2 1.2.2 1.7.1.5-.1 1.7-.7 1.9-1.4.2-.7.2-1.2.2-1.4 0-.1-.2-.2-.5-.3z" />
    </svg>
  </a>

  <button
    type="button"
    data-open-quiz
    aria-label={labels[lang].title}
    class="floating-pulse group inline-flex h-14 w-14 items-center justify-center rounded-lg border border-[rgba(255,223,211,0.55)] bg-[linear-gradient(125deg,#ef8a69,#e7748c)] p-0 text-white shadow-[0_20px_48px_rgba(232,124,96,0.4)] transition duration-300 hover:-translate-y-0.5 hover:shadow-[0_26px_56px_rgba(232,124,96,0.5)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[rgba(255,230,219,0.85)] focus-visible:ring-offset-2 focus-visible:ring-offset-[rgba(17,10,8,0.8)] sm:h-auto sm:min-h-[56px] sm:w-[11.5rem] sm:flex-col sm:items-start sm:justify-center sm:px-4 sm:py-3"
  >
    <svg viewBox="0 0 24 24" class="h-6 w-6 sm:hidden" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
      <path d="M12 7v10M7 12h10" stroke-linecap="round" />
    </svg>
    <span class="hidden text-sm font-semibold leading-tight sm:block">{labels[lang].title}</span>
    <span class="hidden text-[0.68rem] text-[rgba(255,244,239,0.90)] sm:block">{labels[lang].sub}</span>
  </button>
</div>
